# Not Enough Recipes

A Minecraft 1.21.11 Fabric mod that enables **agent-based infinite crafting** through dynamic runtime content creation. This mod serves as the Minecraft integration layer for an agent-based crafting system, where you use AI agents and the Creation Altar to generate new items, blocks, and event handlers that are dynamically loaded into the game without requiring restarts.

## ğŸ¯ Overview

Not Enough Recipes is part of an agent-based infinite crafting system. The mod provides:

- **Creation Altar**: A custom crafting block that agents can interact with to discover new recipes
- **Dynamic Registry System**: Runtime registration of new items and blocks generated by agents
- **Dynamic Resource Loading**: Hot-loading of textures, models, and assets for agent-generated content
- **JavaScript Event System**: Runtime event handlers that agents can create to add custom behaviors

An external agent API (TODO: add repository link) receive Creation Altar recipes and generates:

- New items and blocks with custom properties
- Event handlers written in JavaScript
- Resource files (textures, models) for the generated content

All of this content is dynamically injected into the running game, allowing for truly infinite crafting possibilities where agents can continuously discover and create new content.

## âœ¨ Key Features

### ğŸ”® Creation Altar

A fully-featured crafting block with a custom GUI that mimics the vanilla crafting table. Players place items in the 3x3 grid, and the altar processes them to create new items. Agents monitor these interactions to learn crafting patterns and generate new content.

### ğŸš€ Dynamic Content Generation

Items, blocks, and resources are registered at runtime without game restarts. The mod unfreezes Minecraft's registries to inject new content dynamically, enabling agents to add unlimited new crafting possibilities.

### ğŸ¨ Runtime Resource Loading

Textures and models are loaded from the filesystem and injected into Minecraft's resource system via a custom resource pack. Agents can generate visual assets that are immediately available in-game.

### ğŸ“œ JavaScript Event Handlers

Agents can create JavaScript scripts that listen to Minecraft events (player actions, block interactions, item usage, etc.) and execute custom logic. This allows for complex behaviors and interactions with agent-generated content.

### ğŸ’¾ Content Persistence

Dynamically registered content is saved to JSON configuration files and automatically reloaded when the game starts, ensuring agent-generated content persists across sessions.

### Commands

- `/ner block` - Register a new dynamic block
- `/ner item` - Register a new dynamic item
- `/ner stats` - Show registry statistics
- `/ner test` - Full test suite (registers block + item)
- `/ner resource` - Resource management subcommands
- `/ner persist` - Persistence management subcommands
- `/ner give <itemId>` - Give a dynamically registered item
- `/ner scripts` - JavaScript script management commands

## ğŸ”§ Technical Details

### Registry Manipulation

The mod uses mixins to access internal registry structures:

1. **Unfreezing Registries**: Accesses `MappedRegistry` internals to mark registries as unfrozen
2. **Holder Management**: Manipulates `Holder.Reference` objects to add new entries
3. **ID Assignment**: Dynamically assigns registry IDs to new entries
4. **Synchronisation**: Ensures client-server registry state consistency

### Resource Loading

Resources are loaded from `config/ner/dynamic/`:

```
config/ner/dynamic/
â”œâ”€â”€ textures/
â”‚   â”œâ”€â”€ item/     # Item textures (16x16 PNG)
â”‚   â””â”€â”€ block/    # Block textures (16x16 PNG)
â””â”€â”€ models/
    â”œâ”€â”€ item/     # Item model JSON files
    â””â”€â”€ block/    # Block model JSON files
```

The `DynamicResourcePack` injects these resources into Minecraft's resource system at runtime, allowing textures and models to be loaded without a resource pack.

### JavaScript Scripting

Scripts are loaded from `config/ner/scripts/` and can listen to various Minecraft events:

- Player events (join, leave, tick, death, respawn)
- Block events (break, place, interact)
- Item events (use, pickup, drop, craft)
- Entity events (attack, interact, hurt, death)
- Projectile events (hit block, hit entity)

Scripts have access to a sandboxed JavaScript environment with controlled access to Minecraft APIs.

## ğŸ“¦ Dependencies

### Required External API

**TODO: Add repository link for agent API**

This mod requires an external agent API that generates content based on Creation Altar recipes. The usage of that API are found in its own repo.

### GraalVM JavaScript Engine

The mod requires GraalVM JavaScript engine dependencies:

- `org.graalvm.polyglot:polyglot:23.1.2`
- `org.graalvm.js:js-language:23.1.2`
- `org.graalvm.truffle:truffle-api:23.1.2`
- `org.graalvm.regex:regex:23.1.2`
- `org.graalvm.shadowed:icu4j:23.1.2`

These must be available in your mods folder or classpath. For development, Gradle handles this automatically.

### Other Dependencies

- **Minecraft**: 1.21.11
- **Fabric Loader**: Latest
- **Fabric API**: 0.141.2+1.21.11
- **Java**: 21+

## ğŸš§ Current Status

This is a **proof of concept** to test the feasibility of agent-based infinite crafting in Minecraft. The core systems are functional, but significant development is still needed to make this stable and production-ready. Current limitations include:

- Single-player only (multiplayer synchronisation not yet implemented)
- Registry persistence may not survive game updates
- Performance optimisations needed for large-scale content generation
- Mod compatibility testing required
- Additional error handling and validation needed

The mod demonstrates that dynamic runtime content creation is possible in Minecraft, but requires further development to become a stable platform for agent-based crafting systems.

## ğŸ“ License

MIT License - See [LICENSE.md](LICENSE.md) for license information.

## ğŸ™ Acknowledgments

This mod pushes the boundaries of what's possible with Minecraft modding, demonstrating advanced techniques for runtime content creation and dynamic registry manipulation. It serves as my foundation for exploring agent-based game content generation.
